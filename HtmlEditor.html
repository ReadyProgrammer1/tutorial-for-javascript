<!DOCTYPE html>
<html>

<head>
	<link rel="icon" href="JoustingKnight.png">
	<title>Make Haste! HTML Editor</title>
	<style>
		
		div#textEditor{
			position: relative;
			top:50%;
			left:10%; 
		}
		div#theRibbon{
			border-bottom: none;
			width: 1030px;
			padding: 10px;
			background-color: rgb(40,110,89);
			color: white;
			border-radius: 8px 8px 0px 0px;
		}
		div#richTextArea{
			border: 2px solid rgb(40,110,89);
			height: 500px;
			width: 1046px;
		}
		iframe#theWYSIWYG{
			height: 100%;
			width: 100%
		}
		div#theRibbon > button {
			color: white;
			border: none;
			outline: none;
			background-color: transparent;
			cursor: pointer;
		}
		div#theRibbon > button:hover{
			background-color: rgb(20,90,70);
			transition: all 0.3s linear 0s;
		}
		input[type="color"]{
			border: none;
			outline: none;
			background-color: transparent;
		}
	</style>
	
	<script>
		
		window.addEventListener("load", function(){
			var editor = theWYSIWYG.document;
			editor.designMode = "on";
			
			theWYSIWYG.document.body.style.wordWrap = 'break-word';
			
			copyButton.addEventListener("click", function(){
				editor.execCommand("copy", false, null);
			},false);
			
			boldButton.addEventListener("click", function(){
				editor.execCommand("Bold", false, null);
			},false);
			
			italicButton.addEventListener("click", function(){
				editor.execCommand("Italic", false, null);
			},false);
			
			supButton.addEventListener("click", function(){
				editor.execCommand("Superscript", false, null);
			},false);
			
			subButton.addEventListener("click", function(){
				editor.execCommand("Subscript", false, null);
			},false);
			
			strikeButton.addEventListener("click", function(){
				editor.execCommand("Strikethrough", false, null);
			},false);
			
			orderedListButton.addEventListener("click", function(){
				editor.execCommand("InsertOrderedList", false, "newOL" + Math.round(Math.random() * 1000));
			},false);
			
			unorderedListButton.addEventListener("click", function(){
				editor.execCommand("InsertUnorderedList", false, "newOL" + Math.round(Math.random() * 1000));
			},false);
			
			alignLeftButton.addEventListener("click", function(){
				editor.execCommand("justifyLeft", false, null);
			},false);
			
			alignCenterButton.addEventListener("click", function(){
				editor.execCommand("justifyCenter", false, null);
			},false);
			
			alignRightButton.addEventListener("click", function(){
				editor.execCommand("justifyRight", false, null);
			},false);
			
			alignFullButton.addEventListener("click", function(){
				editor.execCommand("justifyFull", false, null);
			},false);
			
			fontColorButton.addEventListener("change", function(event){
				editor.execCommand("ForeColor", false, event.target.value);
			},false);
			
			highlightButton.addEventListener("change", function(event){
				editor.execCommand("BackColor", false, event.target.value);
			},false);
			
			fontChanger.addEventListener("change", function(event){
				editor.execCommand("FontName", false, event.target.value);
			},false);
			
			fontSizeChanger.addEventListener("change", function(event){
				editor.execCommand("FontSize", false, event.target.value);
			},false);
			
			theWYSIWYG.addEventListener("change", function(e){
				setTimeout(function () {e.target.focus();}, 0);
			},false);
			
			hrButton.addEventListener("click", function(){
				editor.execCommand("insertHorizontalRule", false, null);
			},false);
			
			linkButton.addEventListener("click", function(){
				var url = prompt("Enter a URL", "http://");
				editor.execCommand("CreateLink", false, url);
			},false);
			
			unLinkButton.addEventListener("click", function(){
				editor.execCommand("UnLink", false, null);
			},false);
			
			undoButton.addEventListener("click", function(){
				editor.execCommand("undo", false, null);
			},false);
			
			redoButton.addEventListener("click", function(){
				editor.execCommand("redo", false, null);
			},false);
			
			document.getElementById("theWYSIWYG").focus();
			
		},false);
		
		function SetFocus(){
			document.getElementById("theWYSIWYG").focus();
			//document.getElementById("theWYSIWYG").select();
		}
		
	</script>
  
</head>
<body>
	<h2><a oncontextmenu="return false" href="javascript:void window.open('Tutorial_Main.html', '_self');">
		All Examples
	</a></h2>
	
	<div id="textEditor">
		<div id="theRibbon">
			<button id="copyButton" onmouseup="SetFocus()" title="Copy"><b>Copy</b></button>
			<button id="boldButton" onmouseup="SetFocus()" title="Bold"><b>B</b></button>
			<button id="italicButton" title="Italic"><em>I</em></button>
			<button id="supButton" title="Superscript">X<sup>2</sup></button>
			<button id="subButton" title="Subscript">X<sub>2</sub></button>
			<button id="strikeButton" title="Strikethrough"><s>abc</s></button>
			<button id="orderedListButton" title="Numbered List"><b>(i)</b></button>
			<button id="unorderedListButton" title="Bulleted List"><b>&bull;</b></button>
			<button id="alignLeftButton" title="Align Text Left">&#9568;</button>
			<button id="alignCenterButton" title="Center Text">&#9571;&#9568;</button>
			<button id="alignRightButton" title="Align Text Right">&#9571;</button>
			<button id="alignFullButton" title="Justify Full">&#9776;</button>
			<input type="color" id="fontColorButton" title="Change Font Color">
			<input type="color" id="highlightButton" title="Highlight Text">
			<select id="fontChanger">
				<option value="Times New Roman">Times New Roman</option>
				<option value="Consolas">Consolas</option>
				<option value="Arial">Arial</option>
				<option value="Tahoma">Tahoma</option>
				<option value="monospace">Monospace</option>
				<option value="cursive">Cursive</option>
				<option value="sans-serif">Sans-Serif</option>
				<option value="Calibri">Calibri</option>
			</select>
			<select id="fontSizeChanger">
				<script>
					for (var i = 1; i < 10; i++){
						document.write("<option value='"+i+"'>"+i+"</option>");
					}
				</script>
			</select>
			<button id="hrButton" title="Insert Horizontal Rule">HR</button>
			<button id="linkButton" title="Create Link">Link</button>
			<button id="unLinkButton" title="Remove Link">Unlink</button>
			<button id="undoButton" title="Undo previous action">&#8630;</button>
			<button id="redoButton" title="Redo">&#8631;</button>
			<button id="sourceCode" title="Edit HTML" onclick="viewSource()">View HTML</button>
			<button id="editNormal" title="View Normal Web Page Result" style="display: none;" onclick="viewNormal()">View Result</button>
		</div>
		<div id="richTextArea">
			<iframe id="theWYSIWYG" name="theWYSIWYG" contenteditable onblur="var frame=this; setTimeout(frame.focus(),10)" autofocus frameborder="0"></iframe>
		</div>
	</div>
	
	<script>
		var fonts = document.querySelectorAll("select#fontChanger > option");
		for (var i = 0; i < fonts.length; i++){
			fonts[i].style.fontFamily = fonts[i].value;
		}
		
		var showingSourceCode = false;
		var isInEditMode = true;
		
		function toggleSource(){
			if(showingSourceCode){
				theWYSIWYG.document.getElementsByTagName('body')[0].innerHTML = theWYSIWYG.document.getElementsByTagName('body')[0].textContent;
				showingSourceCode = false;
			}else{
				theWYSIWYG.document.getElementsByTagName('body')[0].textContent = theWYSIWYG.document.getElementsByTagName('body')[0].innerHTML;
				showingSourceCode = true;
			}
		}
		
		function viewSource(){
			
			var htmlBefore, htmlAfter, htmlNoSpaces, htmlLineBreaks = "";
			htmlBefore = theWYSIWYG.document.getElementsByTagName('body')[0].innerHTML;
			htmlNoSpaces = htmlBefore.replace(/&nbsp;/g, " ");
			htmlAfter = htmlNoSpaces.split("><");
			var closingTag = "/";
			
			if(htmlAfter.length == 1){
				htmlLineBreaks = htmlAfter[0];
			}else{
				for (var i = 0; i < htmlAfter.length; i++) {
					if(i == 0){
						htmlLineBreaks += htmlAfter[i] + ">\n";
					}else{
						if(i == htmlAfter.length - 1){
							htmlLineBreaks += "<" + htmlAfter[i];
						}else{
							htmlLineBreaks += "<" + htmlAfter[i] + ">\n";
						}
					}
				}
			}
			
			theWYSIWYG.document.getElementsByTagName('body')[0].innerText = htmlLineBreaks;
			
			sourceCode.style.display = "none";
			editNormal.style.display = "initial";
		}
		
		function viewNormal(){
			theWYSIWYG.document.getElementsByTagName('body')[0].innerHTML = theWYSIWYG.document.getElementsByTagName('body')[0].textContent;
			sourceCode.style.display = "initial";
			editNormal.style.display = "none";
		}
		
		function toggleEdit(){
			if(isInEditMode){
				isInEditMode = false;
				theWYSIWYG.document.designMode = "Off";
			}else{
				isInEditMode = true;
				theWYSIWYG.document.designMode = "On";
			}
		}
		
	</script>
	
	<br><br>
  
</body>
</html>